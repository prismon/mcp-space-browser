{
    "schemes": [
        "http",
        "https"
    ],
    "swagger": "2.0",
    "info": {
        "description": "Disk space indexing agent with REST API and MCP tools for exploring filesystem utilization\n\nThis API provides endpoints for indexing filesystems and retrieving hierarchical disk space data.\nThe server also exposes MCP (Model Context Protocol) tools at /mcp for advanced disk space analysis.",
        "title": "MCP Space Browser API",
        "contact": {
            "name": "API Support",
            "url": "https://github.com/prismon/mcp-space-browser"
        },
        "license": {
            "name": "MIT"
        },
        "version": "0.1.0"
    },
    "basePath": "/",
    "paths": {
        "/api/index": {
            "get": {
                "description": "Triggers asynchronous indexing of the specified filesystem path. The indexing process crawls the directory tree and stores metadata in the database.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "text/plain"
                ],
                "tags": [
                    "Index"
                ],
                "summary": "Index a filesystem path",
                "parameters": [
                    {
                        "type": "string",
                        "example": "\"/home/user/Documents\"",
                        "description": "Filesystem path to index",
                        "name": "path",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "path required",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/api/tree": {
            "get": {
                "description": "Returns a paginated directory listing with statistics and summary information",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Tree"
                ],
                "summary": "Get hierarchical directory tree with pagination",
                "parameters": [
                    {
                        "type": "string",
                        "example": "\"/home/user/Documents\"",
                        "description": "Filesystem path to analyze (defaults to current directory)",
                        "name": "path",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "example": 100,
                        "description": "Maximum number of children to return per page (default: 100, max: 1000)",
                        "name": "limit",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "example": 0,
                        "description": "Pagination offset (default: 0)",
                        "name": "offset",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "example": "\"size\"",
                        "description": "Sort children by: size, name, mtime (default: size)",
                        "name": "sortBy",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "example": "\"desc\"",
                        "description": "Sort order: asc or desc (default: desc)",
                        "name": "order",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "example": true,
                        "description": "Include children in response (default: true)",
                        "name": "includeChildren",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/server.PaginatedTreeResponse"
                        }
                    },
                    "400": {
                        "description": "invalid path",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "failed to build tree",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "server.PaginatedTreeResponse": {
            "type": "object",
            "properties": {
                "children": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/server.TreeChildNode"
                    }
                },
                "kind": {
                    "type": "string"
                },
                "modifiedAt": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "pagination": {
                    "$ref": "#/definitions/server.PaginationMetadata"
                },
                "path": {
                    "type": "string"
                },
                "size": {
                    "type": "integer"
                },
                "summary": {
                    "$ref": "#/definitions/server.TreeStatisticsSummary"
                }
            }
        },
        "server.PaginationMetadata": {
            "type": "object",
            "properties": {
                "hasMore": {
                    "type": "boolean"
                },
                "limit": {
                    "type": "integer"
                },
                "nextPageUrl": {
                    "type": "string"
                },
                "offset": {
                    "type": "integer"
                },
                "prevPageUrl": {
                    "type": "string"
                },
                "total": {
                    "type": "integer"
                }
            }
        },
        "server.TreeChildNode": {
            "type": "object",
            "properties": {
                "kind": {
                    "type": "string"
                },
                "link": {
                    "type": "string"
                },
                "modifiedAt": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "path": {
                    "type": "string"
                },
                "size": {
                    "type": "integer"
                }
            }
        },
        "server.TreeStatisticsSummary": {
            "type": "object",
            "properties": {
                "directoryCount": {
                    "type": "integer"
                },
                "fileCount": {
                    "type": "integer"
                },
                "largestChildren": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/server.TreeChildNode"
                    }
                },
                "totalChildren": {
                    "type": "integer"
                },
                "totalSize": {
                    "type": "integer"
                }
            }
        }
    },
    "tags": [
        {
            "description": "Filesystem indexing operations",
            "name": "Index"
        },
        {
            "description": "Hierarchical disk space data retrieval",
            "name": "Tree"
        }
    ]
}